<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BookHub - BookShelf</title>
    <link rel="stylesheet" href="css/bookshelf.css">
    <script type="text/javascript" src="/eel.js"></script>
</head>

<body>
    <header>
        <div class="container">
            <div class="logo">
                <a href="index.html">
                    <h1>BookHub</h1>
                </a>
            </div>
            <nav>
                <ul>
                    <li><a href="bookstars.html">BookStars</a></li>
                    <li><a href="bookshelf.html">Bookshelf</a></li>
                    <li><a href="borrow.html">Borrows</a></li>
                    <li><a href="account.html">Account</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- <section class="book-list"> -->
        <h2>Available Books</h2>
        <section class="library-grid" id="bookgrid">
    </section>
    <script>
        function loadBooks(){
            eel.listBooks()(renderBooksInContainers)
        }
        function renderBooksInContainers(books) {
            let container = document.getElementById("bookgrid");
            
            books.forEach((book, index) => {
                // Create a new container every 4 books
                
                // Book item
                const bookItem = document.createElement('div');
                bookItem.classList.add('book-item');
                
                // Book title
                const title = document.createElement('h3');
                title.textContent = book[1];
                bookItem.appendChild(title);

                // Book image
                const image = document.createElement('img');
                image.src = "data:image/jpeg;base64,"+book[4];
                image.alt = 'Content Thumbnail';
                bookItem.appendChild(image);
                
                // Book author
                const author = document.createElement('p');
                author.textContent = `Author: ${book[2]}`;
                bookItem.appendChild(author);
                
                // Borrow button
                const borrowButton = document.createElement('button');
                borrowButton.classList.add('borrow-btn');
                borrowButton.textContent = 'Borrow';
                bookItem.appendChild(borrowButton);
                
                // Edit button
                const editButton = document.createElement('button');
                editButton.classList.add('edit-btn');
                editButton.textContent = 'Book Edit';
                bookItem.appendChild(editButton);
                
                // Append book item to the current container
                container.appendChild(bookItem);
            });
        }
        loadBooks()
    </script>
</body>
</html>
